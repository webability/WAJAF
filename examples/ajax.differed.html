<script language="javascript" type="text/javascript" src="/wajaf/system/core.js"></script>
<script language="javascript" type="text/javascript" src="/wajaf/managers/eventManager.js"></script>
<script language="javascript" type="text/javascript" src="/wajaf/managers/ajaxManager.js"></script>

Loading the content of the box:<br />
<br />
Click to <span onclick="send();" style="cursor: pointer; text-decoration: underline; background-color: red;">Request</span> the information.<br />
<br />

<div id="div1" style="position: relative; min-height: 100px; width: 95%; margin-left: auto; margin-right: auto; border: 2px solid blue;">
Waiting...
</div>

<script type="text/javascript">

var r = ajax('/?P=dataset1', 'get', null, loaded, false);
// The values can be take from a capture field, calculated value, etc.
r.addParameter('ignoredvariable1', 'ignoredvalue1');
r.addParameter('ignoredvariable2', 'ignoredvalue2');
r.addParameter('ignoredvariable3', 'ignoredvalue3');
// The request will be sent when the use clicks the button

function loaded(rq)
{
  $('div1').innerHTML = rq.responseText;
  r = null;
  // there is no request anymore
  alert('Information loaded');
}

function send()
{
  if (r)
  {
    r.send();
    $('div1').innerHTML = 'Loading...';
  }
  else
  {
    alert('Information already loaded');
  }
}




</script>

