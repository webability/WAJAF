<script language="javascript" type="text/javascript" src="/wajaf/system/core.js"></script>
<script language="javascript" type="text/javascript" src="/wajaf/managers/eventManager.js"></script>
<script language="javascript" type="text/javascript" src="/wajaf/managers/drawManager.js"></script>

<div style="padding: 10px;">

<h1>The analog clock</h1>

<div id="scene" style="border: 1px solid red; overflow: hidden; height: 250px; width: 250px; margin: 5%; position: relative; cursor: pointer; background-color: black;">
  <div style="position: absolute; top: 118px; left: 230px; color: white;">3</div>
  <div style="position: absolute; top: 225px; left: 122px; color: white;">6</div>
  <div style="position: absolute; top: 118px; left: 10px; color: white;">9</div>
  <div style="position: absolute; top: 10px; left: 117px; color: white;">12</div>
</div>

</div>

<script type="text/javascript">

var hour = 0;
var min = 0;

function drawclock(h,m,s)
{
  if (h != hour)
  {
    erase('hour');
    line('hour', 125, 125, Math.floor(125+60*Math.sin(Math.PI/6*h)), Math.floor(125-60*Math.cos(Math.PI/6*h)), 'yellow', 'scene');
    hour = h;
  }
  if (m != min)
  {
    erase('minute');
    line('minute', 125, 125, Math.floor(125+90*Math.sin(Math.PI/30*m)), Math.floor(125-90*Math.cos(Math.PI/30*m)), 'lime', 'scene');
    min = m;
  }
  erase('second');
  line('second', 125, 125, Math.floor(125+120*Math.sin(Math.PI/30*s)), Math.floor(125-120*Math.cos(Math.PI/30*s)), 'red', 'scene');
}

function clock()
{
  var d = new Date();
  var h = d.getHours();
  var m = d.getMinutes();
  var s = d.getSeconds();
  drawclock(h,m,s);
  var t = setTimeout(clock, 1000);
}

clock();

</script>

